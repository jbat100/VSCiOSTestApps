Code obtained from 

https://github.com/erica/uidevice-extension

under BSD license, so should be fine.